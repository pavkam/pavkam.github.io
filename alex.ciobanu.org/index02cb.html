<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	
	>
<channel>
	<title>
	Comments on: Delphi Generics: Problem 1	</title>
	<atom:link href="https://alex.ciobanu.org/?feed=rss2&#038;p=23" rel="self" type="application/rss+xml" />
	<link>https://alex.ciobanu.org/?p=23</link>
	<description>Yet Another Programming Blog</description>
	<lastBuildDate>Fri, 20 Mar 2009 15:23:55 +0000</lastBuildDate>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.2.2</generator>
			<item>
				<title>
				By: alex				</title>
				<link>https://alex.ciobanu.org/?p=23&#038;cpage=1#comment-182</link>
		<dc:creator><![CDATA[alex]]></dc:creator>
		<pubDate>Fri, 20 Mar 2009 15:23:55 +0000</pubDate>
		<guid isPermaLink="false">http://alex.ciobanu.org/?p=23#comment-182</guid>
					<description><![CDATA[I would suggest you use d2006 to compile YAWE. D2009 still has problems with a lot of stuff (mainly generics related).

I haven&#039;t worked on YAWE for a few years now, and I&#039;m pretty sure there are other hidden errors there too. Try to use it as a learning code and not as much as a functioning piece of software.]]></description>
		<content:encoded><![CDATA[<p>I would suggest you use d2006 to compile YAWE. D2009 still has problems with a lot of stuff (mainly generics related).</p>
<p>I haven&#8217;t worked on YAWE for a few years now, and I&#8217;m pretty sure there are other hidden errors there too. Try to use it as a learning code and not as much as a functioning piece of software.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Panagiotis				</title>
				<link>https://alex.ciobanu.org/?p=23&#038;cpage=1#comment-173</link>
		<dc:creator><![CDATA[Panagiotis]]></dc:creator>
		<pubDate>Mon, 09 Mar 2009 05:12:49 +0000</pubDate>
		<guid isPermaLink="false">http://alex.ciobanu.org/?p=23#comment-173</guid>
					<description><![CDATA[While trying to create a thread safe TMultiMap from DelphiHelpLib I ended again with the same internal error.
The weird thing is that if I remove (comment) the internal multimap storage or if the class has no function/procedure that will produce code by the compiler, I get no error.

No error (only declaration without actual code present):
type
  TThreadMultiMap = class
  private
    FMultiMap: TMultiMap;
  end;

Error:
type
  TThreadMultiMap = class
  private
    FMultiMap: TMultiMap;
  protected
    function GetCount() : Cardinal;
  public
    property Count : Cardinal read GetCount;
  end;
...
function TThreadMultiMap.GetCount: Cardinal;
begin
  // actually any code gives error
  Result := FMultiMap.Count; // if you comment this line it compiles
end;

or some other code that does not access internal multimap:

function TThreadMultiMap.GetCount: Cardinal;
begin
  // actually any code gives error
  Result := Cardinal(Self); // if you comment this line it compiles
end;

Even if I disable inlining still the same error. But thread safe classes for TArraySet, TDictionary, TLinkedList, TList, TQueue and TStack compile without any error or warning. If you want the full unit (and the rest working thread safe classes) tell me to put it somewhere or send it to your email.
I hope the compiler team (I have faith on them) will fix these errors because for the moment generics are only playground.

I just noticed http://qc.embarcadero.com/wc/qcmain.aspx?d=70249
So the use of virtual functions/procedures override and enable inlining in the project and inlining cause problems with generics.

About YAWE, latest rev from svn has so many errors, unit names are different in source code than in filenames, debug helper source code is missing and many other like that. Anyway YAWE is pretty amazing (and a good project to learn alot of things) even if I cannot make it compile (yet).

Thanks again for YAWE and DelphiHelpLib,
Panagiotis.]]></description>
		<content:encoded><![CDATA[<p>While trying to create a thread safe TMultiMap from DelphiHelpLib I ended again with the same internal error.<br />
The weird thing is that if I remove (comment) the internal multimap storage or if the class has no function/procedure that will produce code by the compiler, I get no error.</p>
<p>No error (only declaration without actual code present):<br />
type<br />
  TThreadMultiMap = class<br />
  private<br />
    FMultiMap: TMultiMap;<br />
  end;</p>
<p>Error:<br />
type<br />
  TThreadMultiMap = class<br />
  private<br />
    FMultiMap: TMultiMap;<br />
  protected<br />
    function GetCount() : Cardinal;<br />
  public<br />
    property Count : Cardinal read GetCount;<br />
  end;<br />
&#8230;<br />
function TThreadMultiMap.GetCount: Cardinal;<br />
begin<br />
  // actually any code gives error<br />
  Result := FMultiMap.Count; // if you comment this line it compiles<br />
end;</p>
<p>or some other code that does not access internal multimap:</p>
<p>function TThreadMultiMap.GetCount: Cardinal;<br />
begin<br />
  // actually any code gives error<br />
  Result := Cardinal(Self); // if you comment this line it compiles<br />
end;</p>
<p>Even if I disable inlining still the same error. But thread safe classes for TArraySet, TDictionary, TLinkedList, TList, TQueue and TStack compile without any error or warning. If you want the full unit (and the rest working thread safe classes) tell me to put it somewhere or send it to your email.<br />
I hope the compiler team (I have faith on them) will fix these errors because for the moment generics are only playground.</p>
<p>I just noticed <a href="http://qc.embarcadero.com/wc/qcmain.aspx?d=70249" rel="nofollow">http://qc.embarcadero.com/wc/qcmain.aspx?d=70249</a><br />
So the use of virtual functions/procedures override and enable inlining in the project and inlining cause problems with generics.</p>
<p>About YAWE, latest rev from svn has so many errors, unit names are different in source code than in filenames, debug helper source code is missing and many other like that. Anyway YAWE is pretty amazing (and a good project to learn alot of things) even if I cannot make it compile (yet).</p>
<p>Thanks again for YAWE and DelphiHelpLib,<br />
Panagiotis.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: alex				</title>
				<link>https://alex.ciobanu.org/?p=23&#038;cpage=1#comment-137</link>
		<dc:creator><![CDATA[alex]]></dc:creator>
		<pubDate>Fri, 27 Feb 2009 15:00:05 +0000</pubDate>
		<guid isPermaLink="false">http://alex.ciobanu.org/?p=23#comment-137</guid>
					<description><![CDATA[Thanks!

As for your problem, try to disable the Inlining in project options. IIRC URW1135 is related to inlining.

Note: There are some bugs in the network and tick components of YAWE :)

Alex.]]></description>
		<content:encoded><![CDATA[<p>Thanks!</p>
<p>As for your problem, try to disable the Inlining in project options. IIRC URW1135 is related to inlining.</p>
<p>Note: There are some bugs in the network and tick components of YAWE ðŸ™‚</p>
<p>Alex.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Panagiotis				</title>
				<link>https://alex.ciobanu.org/?p=23&#038;cpage=1#comment-135</link>
		<dc:creator><![CDATA[Panagiotis]]></dc:creator>
		<pubDate>Wed, 18 Feb 2009 13:40:16 +0000</pubDate>
		<guid isPermaLink="false">http://alex.ciobanu.org/?p=23#comment-135</guid>
					<description><![CDATA[I get the same error with YAWE source code in Delphi 2009.

[DCC Fatal Error] Components.NetworkCore.World.pas(685): F2084 Internal Error: URW1135

It does not seem generics to be the problem (no generics in YAWE as you know).

Off topic: It was a pleasant experience to work with YAWE source code while trying to convert it for Delphi 2009, even though there were so many things to change to make it work, I got enlighted and ashamed to even say I know Delphi.
Good work.]]></description>
		<content:encoded><![CDATA[<p>I get the same error with YAWE source code in Delphi 2009.</p>
<p>[DCC Fatal Error] Components.NetworkCore.World.pas(685): F2084 Internal Error: URW1135</p>
<p>It does not seem generics to be the problem (no generics in YAWE as you know).</p>
<p>Off topic: It was a pleasant experience to work with YAWE source code while trying to convert it for Delphi 2009, even though there were so many things to change to make it work, I got enlighted and ashamed to even say I know Delphi.<br />
Good work.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: alex				</title>
				<link>https://alex.ciobanu.org/?p=23&#038;cpage=1#comment-17</link>
		<dc:creator><![CDATA[alex]]></dc:creator>
		<pubDate>Sun, 16 Nov 2008 17:49:21 +0000</pubDate>
		<guid isPermaLink="false">http://alex.ciobanu.org/?p=23#comment-17</guid>
					<description><![CDATA[Hi Barry, I saw a similar report in QC. But anyway, just tried to reproduce this simple problem with this code:

TMan&lt;T&gt; = class
public
  procedure X();
end;

procedure TMan&lt;T&gt;.X;
var
  A : array of T;
begin

end;

var
 d : TMan&lt;Integer&gt;;

The interesting part is that it will work in a new project. If I instead add this class to an existing class collections lib i&#039;m working on it will throw that error. Hell, even if I add a simple &quot;Arr: array of T&quot; in an method of any generic class I am working on it will throw that error. Sorry can&#039;t get you a better report because I can&#039;t get a guaranteed result.

Note: When I rebuild the whole package every time it will not throw this error but when I just compile it will throw it 1 time every two tries.

Note 2: Sometime this error pops up in the lib package, other times in the exe application that tests it (DUnit).

You can try out the libs I am talking about at: http://code.google.com/p/delphilhlplib/

I&#039;ve found other interesting internal errors but those are reported in QC already.

Big regards, Alex.]]></description>
		<content:encoded><![CDATA[<p>Hi Barry, I saw a similar report in QC. But anyway, just tried to reproduce this simple problem with this code:</p>
<p>TMan<t> = class<br />
public<br />
  procedure X();<br />
end;</p>
<p>procedure TMan</t><t>.X;<br />
var<br />
  A : array of T;<br />
begin</p>
<p>end;</p>
<p>var<br />
 d : TMan<integer>;</p>
<p>The interesting part is that it will work in a new project. If I instead add this class to an existing class collections lib i&#8217;m working on it will throw that error. Hell, even if I add a simple &#8220;Arr: array of T&#8221; in an method of any generic class I am working on it will throw that error. Sorry can&#8217;t get you a better report because I can&#8217;t get a guaranteed result.</p>
<p>Note: When I rebuild the whole package every time it will not throw this error but when I just compile it will throw it 1 time every two tries.</p>
<p>Note 2: Sometime this error pops up in the lib package, other times in the exe application that tests it (DUnit).</p>
<p>You can try out the libs I am talking about at: <a href="http://code.google.com/p/delphilhlplib/" rel="nofollow">http://code.google.com/p/delphilhlplib/</a></p>
<p>I&#8217;ve found other interesting internal errors but those are reported in QC already.</p>
<p>Big regards, Alex.</integer></t></p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Barry Kelly				</title>
				<link>https://alex.ciobanu.org/?p=23&#038;cpage=1#comment-16</link>
		<dc:creator><![CDATA[Barry Kelly]]></dc:creator>
		<pubDate>Sun, 16 Nov 2008 13:01:58 +0000</pubDate>
		<guid isPermaLink="false">http://alex.ciobanu.org/?p=23#comment-16</guid>
					<description><![CDATA[Works for me:

unit local_dynarray;

interface

type
  C&#060;T&#062; = class
    class procedure M;
  end;

implementation

class procedure C&#060;T&#062;.M;
var
  x: array of T;
begin
end;

end.

Can you create a complete example that shows the problem? Or better yet, a logged QC number?]]></description>
		<content:encoded><![CDATA[<p>Works for me:</p>
<p>unit local_dynarray;</p>
<p>interface</p>
<p>type<br />
  C&lt;T&gt; = class<br />
    class procedure M;<br />
  end;</p>
<p>implementation</p>
<p>class procedure C&lt;T&gt;.M;<br />
var<br />
  x: array of T;<br />
begin<br />
end;</p>
<p>end.</p>
<p>Can you create a complete example that shows the problem? Or better yet, a logged QC number?</p>
]]></content:encoded>
						</item>
			</channel>
</rss>
