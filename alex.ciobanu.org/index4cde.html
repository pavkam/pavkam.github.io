<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	
	>
<channel>
	<title>
	Comments on: Generics + System.Move = Kaboom!	</title>
	<atom:link href="https://alex.ciobanu.org/?feed=rss2&#038;p=91" rel="self" type="application/rss+xml" />
	<link>https://alex.ciobanu.org/?p=91</link>
	<description>Yet Another Programming Blog</description>
	<lastBuildDate>Wed, 11 Feb 2009 13:09:03 +0000</lastBuildDate>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.2.2</generator>
			<item>
				<title>
				By: alex				</title>
				<link>https://alex.ciobanu.org/?p=91&#038;cpage=1#comment-130</link>
		<dc:creator><![CDATA[alex]]></dc:creator>
		<pubDate>Wed, 11 Feb 2009 13:09:03 +0000</pubDate>
		<guid isPermaLink="false">http://alex.ciobanu.org/?p=91#comment-130</guid>
					<description><![CDATA[While the advanced users are aware of this fact, I&#039;m afraid a lot of people are actually mixing Mover with managed types.]]></description>
		<content:encoded><![CDATA[<p>While the advanced users are aware of this fact, I&#8217;m afraid a lot of people are actually mixing Mover with managed types.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Ken Knopfli				</title>
				<link>https://alex.ciobanu.org/?p=91&#038;cpage=1#comment-129</link>
		<dc:creator><![CDATA[Ken Knopfli]]></dc:creator>
		<pubDate>Wed, 11 Feb 2009 09:30:48 +0000</pubDate>
		<guid isPermaLink="false">http://alex.ciobanu.org/?p=91#comment-129</guid>
					<description><![CDATA[Can&#039;t read the code because it displays so tiny in Firefox.

But you&#039;ve raised an interesting point: in a managed environment, a lot of low-level stuff may be off-limits.

Another reason for no GC in native Delphi.]]></description>
		<content:encoded><![CDATA[<p>Can&#8217;t read the code because it displays so tiny in Firefox.</p>
<p>But you&#8217;ve raised an interesting point: in a managed environment, a lot of low-level stuff may be off-limits.</p>
<p>Another reason for no GC in native Delphi.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: alex				</title>
				<link>https://alex.ciobanu.org/?p=91&#038;cpage=1#comment-128</link>
		<dc:creator><![CDATA[alex]]></dc:creator>
		<pubDate>Tue, 10 Feb 2009 20:10:52 +0000</pubDate>
		<guid isPermaLink="false">http://alex.ciobanu.org/?p=91#comment-128</guid>
					<description><![CDATA[The whole point of the example was to show that by using move you&#039;re not going to get the expected result: B = &quot;Hello Wold&quot; (as if you would assign A to B directly).

Wanted to make an example in which an AV would actually show but that would have been a long one, so I decided to go with the simplest version.]]></description>
		<content:encoded><![CDATA[<p>The whole point of the example was to show that by using move you&#8217;re not going to get the expected result: B = &#8220;Hello Wold&#8221; (as if you would assign A to B directly).</p>
<p>Wanted to make an example in which an AV would actually show but that would have been a long one, so I decided to go with the simplest version.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Xepol				</title>
				<link>https://alex.ciobanu.org/?p=91&#038;cpage=1#comment-127</link>
		<dc:creator><![CDATA[Xepol]]></dc:creator>
		<pubDate>Tue, 10 Feb 2009 17:34:04 +0000</pubDate>
		<guid isPermaLink="false">http://alex.ciobanu.org/?p=91#comment-127</guid>
					<description><![CDATA[I suspect the larger lesson here is to never use true low level calls unless you have a true low level understanding of how things work.

And ya, move is a very dangerous function because it does work so low level.

Btw, nothing in the output is technically &#039;wrong&#039; or surprising. Copy on write semantics force A to generate a new instance when you modify it and the reference count is higher than 1 (which it is thanks to the copy in C).  That leaves B &#038; C pointing at the original string which now has a reference count of 1. When you modify C&#039;s string data, it does not have to reallocate so it just modifies the data directly.  Since B points to the same string as C, the result is inevitable.]]></description>
		<content:encoded><![CDATA[<p>I suspect the larger lesson here is to never use true low level calls unless you have a true low level understanding of how things work.</p>
<p>And ya, move is a very dangerous function because it does work so low level.</p>
<p>Btw, nothing in the output is technically &#8216;wrong&#8217; or surprising. Copy on write semantics force A to generate a new instance when you modify it and the reference count is higher than 1 (which it is thanks to the copy in C).  That leaves B &amp; C pointing at the original string which now has a reference count of 1. When you modify C&#8217;s string data, it does not have to reallocate so it just modifies the data directly.  Since B points to the same string as C, the result is inevitable.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Tom Birch				</title>
				<link>https://alex.ciobanu.org/?p=91&#038;cpage=1#comment-126</link>
		<dc:creator><![CDATA[Tom Birch]]></dc:creator>
		<pubDate>Tue, 10 Feb 2009 16:14:04 +0000</pubDate>
		<guid isPermaLink="false">http://alex.ciobanu.org/?p=91#comment-126</guid>
					<description><![CDATA[Correction,  looking again, the values are exactly what they should be.

The sizeOf(A) is probably 4, the size of a pointer.

A is a pointer , you move that pointer to B.
Hello World ref count 1

you assign a ref counted version to C.
Hello World ref count 2

you change A which creates a new string with_ in front.
Hello World ref count 1
_ello World ref count 1

you change C which changes the string it is pointing to with a + in front and 
+ello World ref count 1 orignally the Hello World

since B was not reference counted and was pointing to the original Hello world, has the same value as C.

So the results are exactly as you coded it.]]></description>
		<content:encoded><![CDATA[<p>Correction,  looking again, the values are exactly what they should be.</p>
<p>The sizeOf(A) is probably 4, the size of a pointer.</p>
<p>A is a pointer , you move that pointer to B.<br />
Hello World ref count 1</p>
<p>you assign a ref counted version to C.<br />
Hello World ref count 2</p>
<p>you change A which creates a new string with_ in front.<br />
Hello World ref count 1<br />
_ello World ref count 1</p>
<p>you change C which changes the string it is pointing to with a + in front and<br />
+ello World ref count 1 orignally the Hello World</p>
<p>since B was not reference counted and was pointing to the original Hello world, has the same value as C.</p>
<p>So the results are exactly as you coded it.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Tom Birch				</title>
				<link>https://alex.ciobanu.org/?p=91&#038;cpage=1#comment-125</link>
		<dc:creator><![CDATA[Tom Birch]]></dc:creator>
		<pubDate>Tue, 10 Feb 2009 15:42:58 +0000</pubDate>
		<guid isPermaLink="false">http://alex.ciobanu.org/?p=91#comment-125</guid>
					<description><![CDATA[To me, it looks like A and C are correct and B is wrong?]]></description>
		<content:encoded><![CDATA[<p>To me, it looks like A and C are correct and B is wrong?</p>
]]></content:encoded>
						</item>
			</channel>
</rss>
