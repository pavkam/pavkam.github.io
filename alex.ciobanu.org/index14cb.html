<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>prism &#8211; YAPB</title>
	<atom:link href="https://alex.ciobanu.org/?feed=rss2&#038;tag=prism" rel="self" type="application/rss+xml" />
	<link>https://alex.ciobanu.org</link>
	<description>Yet Another Programming Blog</description>
	<lastBuildDate>Thu, 22 Jan 2009 11:59:59 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.2.2</generator>

<image>
	<url>https://alex.ciobanu.org/files/uploads/2018/05/7327309-150x150.jpg</url>
	<title>prism &#8211; YAPB</title>
	<link>https://alex.ciobanu.org</link>
	<width>32</width>
	<height>32</height>
</image> 
	<item>
		<title>Delphi Prism: DelphiString</title>
		<link>https://alex.ciobanu.org/?p=53</link>
				<comments>https://alex.ciobanu.org/?p=53#comments</comments>
				<pubDate>Thu, 22 Jan 2009 11:59:59 +0000</pubDate>
		<dc:creator><![CDATA[Alexandru Ciobanu]]></dc:creator>
				<category><![CDATA[Software Development]]></category>
		<category><![CDATA[.net]]></category>
		<category><![CDATA[delphi]]></category>
		<category><![CDATA[LinkedIn]]></category>
		<category><![CDATA[prism]]></category>
		<category><![CDATA[rtl]]></category>

		<guid isPermaLink="false">http://alex.ciobanu.org/?p=53</guid>
				<description><![CDATA[Was just reading the source code for ShineOn (the RTL implementation in Delphi Prism) and found an interesting piece: DelphiString (in /ShineOn.RTL/DelphiString.pas). What is it? It is a class that tries to replicate the behavior of the Win32... ]]></description>
								<content:encoded><![CDATA[<p>Was just reading the source code for<em> ShineOn</em> (the RTL implementation in Delphi Prism) and found an interesting piece: <strong>DelphiString</strong> (in /ShineOn.RTL/DelphiString.pas).</p>
<p>What is it? It is a class that tries to replicate the behavior of the Win32 Delphi&#8217;s String type.The difference between Delphi&#8217;s String and .NET string is that the first one is mutable (aka can be written to but not thread-safe) and the second is immutable (can&#8217;t be modified making it thread-safe but harder to use).</p>
<p>If you are porting an application over Win32 Delphi you can&#8217;t normally use .NET&#8217;s String class because most of your code surely makes operations on strings.</p>
<p>Back to DelphiString; you might be tempted to use it simply by replacing all instances of String with DelphiString in your code &#8212; WRONG! Because Win32 Delphi uses a technique called Copy-On-Write, code like this:</p>
<pre class="brush: delphi; title: ; notranslate">
S1 := 'John'
S2 := S1;
S2[1] := '_';
ASSERT((S1= 'John') and (S2 = '_ohn'));
</pre>
<p>&#8230; will work as expected (in Win32 Delphi) even if S2 is initially pointing to the same string as S1! In Delphi Prism, S2 will point to the same object as S2, but no &#8220;copy-on-write&#8221; will be performed and both strings will eventually be changed to &#8220;_ohn&#8221;. A simple &#8220;<em>replace all String with DelphiString</em>&#8221; will not be enough. I would kindly suggest that the application gets ported to use .NET String class rather than DelphiString.</p>
]]></content:encoded>
							<wfw:commentRss>https://alex.ciobanu.org/?feed=rss2&#038;p=53</wfw:commentRss>
		<slash:comments>3</slash:comments>
							</item>
	</channel>
</rss>
